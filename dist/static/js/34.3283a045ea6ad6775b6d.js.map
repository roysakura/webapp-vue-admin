{"version":3,"sources":["webpack:///./src/views/report/index.vue","webpack:///./src/api/report.js","webpack:///index.vue?2b9f","webpack:///./src/views/report/index.vue?f94b"],"names":["getReportInfo","page","pageSize","axios","get","params","page_size","then","res","resolve","err","reject","submitCheckReport","id","put","dealed"],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA,yBAAyH;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;;ACVA;;AAOO,SAASA,aAAT,CAAuBC,IAAvB,EAA4BC,QAA5B,EAAsC;AACzC,WAAO,6CAAAC,CAAMC,GAAN,CAAU,oCAAV,EAA+C;AAClDC,gBAAO;AACHJ,kBAAKA,IADF;AAEHK,uBAAUJ;AAFP;AAD2C,KAA/C,EAKJK,IALI,CAKC,UAACC,GAAD,EAAO;AACb,eAAO,sEAAQC,OAAR,CAAgBD,GAAhB,CAAP;AACD,KAPM,EAOL,UAACE,GAAD,EAAO;AACL,eAAO,sEAAQC,MAAR,CAAeD,GAAf,CAAP;AACH,KATM,CAAP;AAUH;;AAEM,SAASE,iBAAT,CAA2BC,EAA3B,EAA+B;AAClC,WAAO,6CAAAV,CAAMW,GAAN,gCAAuCD,EAAvC,gBAAqD;AACxDE,gBAAO;AADiD,KAArD,EAEJR,IAFI,CAEC,UAACC,GAAD,EAAO;AACX,eAAO,sEAAQC,OAAR,CAAgBD,GAAhB,CAAP;AACH,KAJM,EAIL,UAACE,GAAD,EAAO;AACL,eAAO,sEAAQC,MAAR,CAAeD,GAAf,CAAP;AACH,KANM,CAAP;AAOH,C;;;;;;;;;;;;ACqCD;AACA;AACA;0BAEA;;qBAEA;yBACA;wBACA;sBAEA;AALA;AAMA;gCACA;0BACA;AACA;;;;AAEA;;0IACA;8CACA;iDACA;8BAEA,CACA;AACA;uEACA;wCACA;AACA;;AACA;;6IACA;oCACA;;6BAEA;0BAEA;AAHA;8BAIA;4CACA;AACA;AACA;6CACA;;yBAEA;yCAEA;AAHA;AAKA;AA7BA;AAZA,G;;;;;;;ACvEA,gBAAgB,mBAAmB,aAAa,0BAA0B;AAC1E;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH,CAAC,qB","file":"static/js/34.3283a045ea6ad6775b6d.js","sourcesContent":["var Component = require(\"!../../../node_modules/_vue-loader@12.1.0@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/_vue-loader@12.1.0@vue-loader/lib/selector?type=script&index=0!./index.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/_vue-loader@12.1.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c85a987a\\\"}!../../../node_modules/_vue-loader@12.1.0@vue-loader/lib/selector?type=template&index=0!./index.vue\"),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/report/index.vue\n// module id = 264\n// module chunks = 34","/**\r\n * Created by THINK on 2017/11/16.\r\n */\r\nimport axios from 'axios';\r\n/**\r\n * 审核名片\r\n * @param page\r\n * @param pageSize\r\n * @returns {*}\r\n */\r\nexport function getReportInfo(page,pageSize) {\r\n    return axios.get(\"/quote/procurement/report/results/\",{\r\n        params:{\r\n            page:page,\r\n            page_size:pageSize,\r\n        }\r\n    }).then((res)=>{\r\n      return Promise.resolve(res);\r\n    },(err)=>{\r\n        return Promise.reject(err);\r\n    })\r\n}\r\n\r\nexport function submitCheckReport(id) {\r\n    return axios.put(`/quote/procurement/report/${id}/results/`,{\r\n        dealed:true\r\n    }).then((res)=>{\r\n        return Promise.resolve(res);\r\n    },(err)=>{\r\n        return Promise.reject(err);\r\n    })\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/report.js","<template>\r\n    <div class=\"report-container\">\r\n        <el-table\r\n                :data=\"reports\"\r\n                border fit highlight-current-row\r\n                style=\"width: 100%\">\r\n            <el-table-column\r\n                    label=\"举报时间\"\r\n                    width=\"180\"\r\n                    align=\"center\"\r\n            >\r\n                <template scope=\"scope\">\r\n                    <span>{{scope.row.created_at}}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n                    label=\"举报人\"\r\n                    width=\"180\"\r\n                    align=\"center\"\r\n            >\r\n                <template scope=\"scope\">\r\n                    <span>{{scope.row.username}}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n                    label=\"举报(询价)单号\"\r\n                    width=\"180\"\r\n                    align=\"center\"\r\n            >\r\n                <template scope=\"scope\">\r\n                    <span>{{scope.row.ref}}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n                    label=\"举报内容\"\r\n                    align=\"center\"\r\n                    width=\"180\"\r\n            >\r\n                <template scope=\"scope\" class=\"img-container\">\r\n                    <img :src=\"scope.row.content\" alt=\"\" class=\"u-icon\">\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n                    label=\"操作\"\r\n                    align=\"center\"\r\n            >\r\n                <template scope=\"scope\">\r\n                    <el-button  size=\"small\" type=\"warning\" @click=\"checkUReport(scope.row)\" v-show=\"!scope.row.dealed\">未处理\r\n                    </el-button>\r\n                    <el-button  size=\"small\" type=\"primary\" v-show=\"scope.row.dealed\">已处理\r\n                    </el-button>\r\n                    <!-- <el-button  size=\"small\" type=\"primary\">\r\n                     </el-button>-->\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <div class=\"block\">\r\n            <el-pagination\r\n                    @current-change=\"handleCurrentChange\"\r\n                    :current-page=\"currentPage\"\r\n                    :page-size=pageSize\r\n                    layout=\"total, prev, pager, next, jumper\"\r\n                    :total=totalCount>\r\n            </el-pagination>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    import {getReportInfo} from '../../api/report'\r\n    import {submitCheckReport} from '../../api/report'\r\n    export default{\r\n        data(){\r\n            return{\r\n                reports:[],\r\n                currentPage:1,\r\n                totalCount:0,\r\n                pageSize:10,\r\n            }\r\n        },\r\n        mounted(){\r\n            this.fetchData(1,10);\r\n        },\r\n        methods:{\r\n            fetchData(page,pageSize){\r\n                getReportInfo(page,pageSize).then((res)=>{\r\n                    this.reports = res.data.data.detail;\r\n                    this.totalCount = res.data.data.total_count;\r\n                },(err)=>{\r\n\r\n                })\r\n            },\r\n            handleCurrentChange(currentPage){\r\n                this.fetchData(currentPage,10);\r\n            },\r\n            checkUReport(reportInfo){\r\n                submitCheckReport(reportInfo.id).then((res)=>{\r\n                    reportInfo.dealed = true;\r\n                    this.$message({\r\n                        message: '已成功处理!',\r\n                        type: 'success'\r\n                    });\r\n                },(err)=>{\r\n                    this.showMsg(\"处理失败,请重试!\",false);\r\n                });\r\n            },\r\n            showMsg(str,flag){\r\n                this.$message({\r\n                    message:str,\r\n                    type:flag ? \"success\":\"warning\"\r\n                })\r\n            },\r\n        }\r\n    }\r\n</script>\n\n\n// WEBPACK FOOTER //\n// index.vue?3ef94ec7","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"report-container\"\n  }, [_c('el-table', {\n    staticStyle: {\n      \"width\": \"100%\"\n    },\n    attrs: {\n      \"data\": _vm.reports,\n      \"border\": \"\",\n      \"fit\": \"\",\n      \"highlight-current-row\": \"\"\n    }\n  }, [_c('el-table-column', {\n    attrs: {\n      \"label\": \"举报时间\",\n      \"width\": \"180\",\n      \"align\": \"center\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('span', [_vm._v(_vm._s(scope.row.created_at))])]\n      }\n    }])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"label\": \"举报人\",\n      \"width\": \"180\",\n      \"align\": \"center\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('span', [_vm._v(_vm._s(scope.row.username))])]\n      }\n    }])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"label\": \"举报(询价)单号\",\n      \"width\": \"180\",\n      \"align\": \"center\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('span', [_vm._v(_vm._s(scope.row.ref))])]\n      }\n    }])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"label\": \"举报内容\",\n      \"align\": \"center\",\n      \"width\": \"180\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('img', {\n          staticClass: \"u-icon\",\n          attrs: {\n            \"src\": scope.row.content,\n            \"alt\": \"\"\n          }\n        })]\n      }\n    }])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"label\": \"操作\",\n      \"align\": \"center\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('el-button', {\n          directives: [{\n            name: \"show\",\n            rawName: \"v-show\",\n            value: (!scope.row.dealed),\n            expression: \"!scope.row.dealed\"\n          }],\n          attrs: {\n            \"size\": \"small\",\n            \"type\": \"warning\"\n          },\n          on: {\n            \"click\": function($event) {\n              _vm.checkUReport(scope.row)\n            }\n          }\n        }, [_vm._v(\"未处理\\n                \")]), _vm._v(\" \"), _c('el-button', {\n          directives: [{\n            name: \"show\",\n            rawName: \"v-show\",\n            value: (scope.row.dealed),\n            expression: \"scope.row.dealed\"\n          }],\n          attrs: {\n            \"size\": \"small\",\n            \"type\": \"primary\"\n          }\n        }, [_vm._v(\"已处理\\n                \")])]\n      }\n    }])\n  })], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"block\"\n  }, [_c('el-pagination', {\n    attrs: {\n      \"current-page\": _vm.currentPage,\n      \"page-size\": _vm.pageSize,\n      \"layout\": \"total, prev, pager, next, jumper\",\n      \"total\": _vm.totalCount\n    },\n    on: {\n      \"current-change\": _vm.handleCurrentChange\n    }\n  })], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@12.1.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-c85a987a\"}!./~/_vue-loader@12.1.0@vue-loader/lib/selector.js?type=template&index=0!./src/views/report/index.vue\n// module id = 888\n// module chunks = 34"],"sourceRoot":""}